{"ast":null,"code":"var _jsxFileName = \"/home/trojann/Documents/Jitu-projects/stackTrial/stacktrial/Frontend/src/Components/UserPage.js\",\n  _s = $RefreshSig$();\nimport Header1 from \"./Header1\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { useEffect, useState, useContext } from 'react';\nimport { Link, Navigate } from 'react-router-dom';\nimport Header2 from \"./Header2\";\nimport BlueButtonLink from \"./BlueButtonLink\";\nimport UserContext from \"./UserContext\";\nimport BlueButton from \"./BlueButton\";\nimport { Helmet } from \"react-helmet\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  padding: 30px 20px;\n  display: grid;\n  grid-template-columns: 1fr 200px;\n`;\n_c = Container;\nconst Buttons = styled.div`\n  text-align:right;\n`;\n_c2 = Buttons;\nconst PostRow = styled(Link)`\n  background-color: rgba(255,255,255,.05);\n  padding: 15px 15px 10px;\n  display: grid;\n  grid-template-columns: 30px 1fr;\n  column-gap: 20px;\n  border-top: 1px solid #555;\n  text-decoration: none;\n`;\n_c3 = PostRow;\nconst PostPoints = styled.div`\n  color: #bbb;\n  font-size: 2rem;\n  text-align: right;\n`;\n_c4 = PostPoints;\nfunction UserPage(_ref) {\n  _s();\n  let {\n    match\n  } = _ref;\n  const [userInfo, setUserInfo] = useState(null);\n  const [votesInfo, setVotesInfo] = useState(null);\n  const [votesTotal, setVotesTotal] = useState(0);\n  const {\n    user,\n    checkAuth\n  } = useContext(UserContext);\n  const [navigateToTheHomePage, setNavigateToTheHomePage] = useState(false);\n  function logout() {\n    axios.post('http://localhost:3030/logout', {}, {\n      withCredentials: true\n    }).then(() => {\n      checkAuth().catch(() => setNavigateToTheHomePage(true));\n    });\n  }\n  useEffect(() => {\n    function getUserInfo() {\n      axios.get('http://localhost:3030/users/' + match.params.id).then(response => {\n        setUserInfo(response.data.user);\n        setVotesInfo(response.data.votesInfo);\n        let total = 0;\n        response.data.votesInfo.forEach(voteRow => {\n          total += voteRow.votes_sum;\n        });\n        setVotesTotal(total);\n      });\n    }\n    getUserInfo();\n  }, [match.params.id]);\n  if (navigateToTheHomePage) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: '/'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [!!userInfo && /*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: [\"User: \", userInfo.name, \" - StackOverflowLite\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Header1, {\n          children: userInfo && userInfo.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Header2, {\n          children: [\"Total points: \", votesTotal]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Buttons, {\n        children: !!userInfo && !!user && parseInt(match.params.id) === user.id && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(BlueButtonLink, {\n            to: '/profile',\n            style: {\n              marginBottom: '10px'\n            },\n            children: \"Edit profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(BlueButton, {\n            onClick: () => logout(),\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: votesInfo && votesInfo.map(voteInfoRow => /*#__PURE__*/_jsxDEV(PostRow, {\n        to: '/questions/' + (voteInfoRow.parent_id || voteInfoRow.id),\n        children: [/*#__PURE__*/_jsxDEV(PostPoints, {\n          children: voteInfoRow.votes_sum\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: voteInfoRow.title || voteInfoRow.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(UserPage, \"ccr44TnUQVJ16mFbwHu+qrFV3hU=\");\n_c5 = UserPage;\nexport default UserPage;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Buttons\");\n$RefreshReg$(_c3, \"PostRow\");\n$RefreshReg$(_c4, \"PostPoints\");\n$RefreshReg$(_c5, \"UserPage\");","map":{"version":3,"names":["Header1","styled","axios","useEffect","useState","useContext","Link","Navigate","Header2","BlueButtonLink","UserContext","BlueButton","Helmet","Container","div","Buttons","PostRow","PostPoints","UserPage","match","userInfo","setUserInfo","votesInfo","setVotesInfo","votesTotal","setVotesTotal","user","checkAuth","navigateToTheHomePage","setNavigateToTheHomePage","logout","post","withCredentials","then","catch","getUserInfo","get","params","id","response","data","total","forEach","voteRow","votes_sum","name","parseInt","marginBottom","map","voteInfoRow","parent_id","title","content"],"sources":["/home/trojann/Documents/Jitu-projects/stackTrial/stacktrial/Frontend/src/Components/UserPage.js"],"sourcesContent":["import Header1 from \"./Header1\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport {useEffect, useState, useContext} from 'react';\nimport {Link, Navigate} from 'react-router-dom';\nimport Header2 from \"./Header2\";\nimport BlueButtonLink from \"./BlueButtonLink\";\nimport UserContext from \"./UserContext\";\nimport BlueButton from \"./BlueButton\";\nimport {Helmet} from \"react-helmet\";\n\nconst Container = styled.div`\n  padding: 30px 20px;\n  display: grid;\n  grid-template-columns: 1fr 200px;\n`;\nconst Buttons = styled.div`\n  text-align:right;\n`;\nconst PostRow = styled(Link)`\n  background-color: rgba(255,255,255,.05);\n  padding: 15px 15px 10px;\n  display: grid;\n  grid-template-columns: 30px 1fr;\n  column-gap: 20px;\n  border-top: 1px solid #555;\n  text-decoration: none;\n`;\nconst PostPoints = styled.div`\n  color: #bbb;\n  font-size: 2rem;\n  text-align: right;\n`;\n\nfunction UserPage({match}) {\n\n  const [userInfo,setUserInfo] = useState(null);\n  const [votesInfo,setVotesInfo] = useState(null);\n  const [votesTotal,setVotesTotal] = useState(0);\n  const {user,checkAuth} = useContext(UserContext);\n  const [navigateToTheHomePage, setNavigateToTheHomePage] = useState(false);\n\n  function logout() {\n    axios.post('http://localhost:3030/logout', {}, {withCredentials: true})\n      .then(() => {\n        checkAuth().catch(() => setNavigateToTheHomePage(true));\n      });\n  }\n  useEffect(() => {\n    function getUserInfo() {\n      axios.get('http://localhost:3030/users/'+match.params.id)\n        .then(response => {\n          setUserInfo(response.data.user);\n          setVotesInfo(response.data.votesInfo);\n          let total = 0;\n          response.data.votesInfo.forEach(voteRow => {\n            total+= voteRow.votes_sum;\n          });\n          setVotesTotal(total);\n        });\n    }\n    getUserInfo();\n  }, [match.params.id]);\n\n  if (navigateToTheHomePage) {\n    return (<Navigate to={'/'} />);\n  }\n\n  return (\n    <main>\n      {!!userInfo && (\n        <Helmet>\n          <title>User: {userInfo.name} - StackOverflowLite</title>\n        </Helmet>\n      )}\n      <Container>\n        <div>\n          <Header1>{userInfo && userInfo.name}</Header1>\n          <Header2>Total points: {votesTotal}</Header2>\n        </div>\n        <Buttons>\n          {!!userInfo && !!user && parseInt(match.params.id) === user.id && (\n            <>\n              <BlueButtonLink to={'/profile'} style={{marginBottom:'10px'}}>Edit profile</BlueButtonLink>\n              <br />\n              <BlueButton onClick={() => logout()}>Logout</BlueButton>\n            </>\n          )}\n        </Buttons>\n      </Container>\n      <ul>\n        {votesInfo && votesInfo.map(voteInfoRow => (\n          <PostRow to={'/questions/'+(voteInfoRow.parent_id || voteInfoRow.id)}>\n            <PostPoints>{voteInfoRow.votes_sum}</PostPoints>\n            <div>{voteInfoRow.title || voteInfoRow.content}</div>\n          </PostRow>\n        ))}\n      </ul>\n    </main>\n  );\n}\n\nexport default UserPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}