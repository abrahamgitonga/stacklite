{"ast":null,"code":"var _jsxFileName = \"/home/trojann/Documents/Jitu-projects/stackTrial/stacktrial/Frontend/src/Components/ProfilePage.js\";\nimport { Component } from 'react';\nimport Header1 from \"./Header1\";\nimport styled from \"styled-components\";\nimport BlueButton from \"./BlueButton\";\nimport axios from \"axios\";\nimport { Navigate } from \"react-router-dom\";\nimport UserContext from \"./UserContext\";\nimport Input from \"./Input\";\nimport Notification from \"./Notifications\";\nimport { Helmet } from \"react-helmet\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  padding: 30px 20px;\n`;\n_c = Container;\nclass ProfilePage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showConfirmation: false,\n      redirectToTheHomePage: false,\n      username: ''\n    };\n  }\n  componentDidMount() {\n    this.setState({\n      username: this.context.user ? this.context.user.name : ''\n    });\n  }\n  logout() {\n    axios.post('http://localhost:3030/logout', {}, {\n      withCredentials: true\n    }).then(() => {\n      this.context.checkAuth().catch(() => this.setState({\n        redirectToTheHomePage: true\n      }));\n    });\n  }\n  update(ev) {\n    ev.preventDefault();\n    const data = {\n      name: this.context.user.name\n    };\n    axios.post('http://localhost:3030/users/profile', data, {\n      withCredentials: true\n    }).then(() => this.setState({\n      showNotification: true\n    }));\n  }\n  handleOnNameChange(ev) {\n    this.setState({\n      username: ev.target.value\n    });\n    this.context.editUser({\n      name: ev.target.value\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        children: /*#__PURE__*/_jsxDEV(\"title\", {\n          children: \"StackOvercloned - your profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), this.state.redirectToTheHomePage && /*#__PURE__*/_jsxDEV(Navigate, {\n        to: '/'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Header1, {\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), this.state.showConfirmation && /*#__PURE__*/_jsxDEV(Notification, {\n          children: \"Your profile has been updated!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(UserContext, {\n          children: _ref => {\n            let {\n              user\n            } = _ref;\n            if (user) {\n              return /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: ev => this.update(ev),\n                  children: [/*#__PURE__*/_jsxDEV(Input, {\n                    placeholder: 'Your name',\n                    value: this.state.username,\n                    onChange: ev => this.handleOnNameChange(ev)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 67,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(BlueButton, {\n                    children: \"Update profile\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 66,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(BlueButton, {\n                  onClick: () => this.logout(),\n                  children: \"Logout\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true);\n            } else {\n              return /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"You are not logged in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 23\n              }, this);\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}\nProfilePage.contextType = UserContext;\nexport default ProfilePage;\nvar _c;\n$RefreshReg$(_c, \"Container\");","map":{"version":3,"names":["Component","Header1","styled","BlueButton","axios","Navigate","UserContext","Input","Notification","Helmet","Container","div","ProfilePage","constructor","props","state","showConfirmation","redirectToTheHomePage","username","componentDidMount","setState","context","user","name","logout","post","withCredentials","then","checkAuth","catch","update","ev","preventDefault","data","showNotification","handleOnNameChange","target","value","editUser","render","contextType"],"sources":["/home/trojann/Documents/Jitu-projects/stackTrial/stacktrial/Frontend/src/Components/ProfilePage.js"],"sourcesContent":["import {Component} from 'react';\nimport Header1 from \"./Header1\";\nimport styled from \"styled-components\";\nimport BlueButton from \"./BlueButton\";\nimport axios from \"axios\";\nimport {Navigate} from \"react-router-dom\";\nimport UserContext from \"./UserContext\";\nimport Input from \"./Input\";\nimport Notification from \"./Notifications\";\nimport {Helmet} from \"react-helmet\";\n\nconst Container = styled.div`\n  padding: 30px 20px;\n`;\n\nclass ProfilePage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showConfirmation: false,\n      redirectToTheHomePage: false,\n      username: '',\n    };\n  }\n  componentDidMount() {\n    this.setState({\n      username: this.context.user ? this.context.user.name : '',\n    });\n  }\n\n  logout() {\n    axios.post('http://localhost:3030/logout', {}, {withCredentials: true})\n      .then(() => {\n        this.context.checkAuth().catch(() => this.setState({redirectToTheHomePage:true}));\n      });\n  }\n  update(ev) {\n    ev.preventDefault();\n    const data = {name:this.context.user.name};\n    axios.post('http://localhost:3030/users/profile', data, {withCredentials:true})\n      .then(() => this.setState({showNotification:true}));\n  }\n  handleOnNameChange(ev) {\n    this.setState({username:ev.target.value});\n    this.context.editUser({name:ev.target.value});\n  }\n\n  render () {\n    return (\n      <>\n        <Helmet>\n          <title>StackOvercloned - your profile</title>\n        </Helmet>\n        {this.state.redirectToTheHomePage && (\n          <Navigate to={'/'} />\n        )}\n        <Container>\n          <Header1>Profile</Header1>\n          {this.state.showConfirmation && (\n            <Notification>Your profile has been updated!</Notification>\n          )}\n          <UserContext>{({user}) => {\n            if (user) {\n              return (\n                <>\n                  <form onSubmit={ev => this.update(ev)}>\n                    <Input placeholder={'Your name'} value={this.state.username}\n                           onChange={ev => this.handleOnNameChange(ev)} />\n                    <BlueButton>Update profile</BlueButton>\n                  </form>\n                  <hr />\n                  <BlueButton onClick={() => this.logout()}>Logout</BlueButton>\n                </>\n              );\n            } else {\n              return (<p>You are not logged in</p>);\n            }\n          }}</UserContext>\n        </Container>\n      </>\n    );\n  }\n\n\n}\n\nProfilePage.contextType = UserContext;\n\nexport default ProfilePage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}